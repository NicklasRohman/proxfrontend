<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
<h:head></h:head>
<h:body>
	<h:form id="profileForm">

		<p:dataTable id="profileTable" value="#{profileBean.profiles}"
			var="pro" editable="true" editMode="cell">
			<f:facet name="header">
				<h:outputText value="Profiles" />
			</f:facet>

			<p:column headerText="Email">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputText value="#{pro.emails}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{pro.emails}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Password">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{pro.password}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{pro.password}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Name">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{pro.name}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{pro.name}" />
					</f:facet>
				</p:cellEditor>

			</p:column>

			<p:column headerText="Bio">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{pro.bio}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{pro.bio}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Roles">
				<p:cellEditor>
					<f:facet name="output">
						<p:dataList value="#{pro.roleResult}" var="r">#{r.rolename}</p:dataList>
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{pro.roleResult}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column style="width:35px">
				<p:commandButton action="#{profileBean.editProfile(pro)}"
					icon="ui-icon-pencil" update="profileTable" />
			</p:column>


			<p:column style="width:35px">
				<p:commandButton action="#{profileBean.deleteProfile(pro)}"
					icon="ui-icon-trash" update="profileTable" />
			</p:column>


			<f:facet name="footer">
				<p:commandLink value="Add profile" icon="ui-icon-plus"
					oncomplete="PF('newProfileDialog').show()" />
			</f:facet>
		</p:dataTable>

		<p:dialog dynamic="true" id="newProfileDialog"
			widgetVar="newProfileDialog" width="300" height="350">
			<p:outputPanel>

				<p:outputLabel for="email" value="Email:" />
				<p:inputText id="email" label="email"
					value="#{profileBean.newProfile.emails}" required="true"
					requiredMessage="User most have a Email" />
				<br />
				<p:outputLabel for="password" value="Password:" />
				<p:inputText type="password" id="password" label="password"
					value="#{profileBean.newProfile.password}" required="true"
					requiredMessage="User most have a password" />
				<br />
				<p:outputLabel for="name" value="Name:" />
				<p:inputText id="name" label="name"
					value="#{profileBean.newProfile.name}" required="true"
					requiredMessage="User most have a name" />
				<br />
				<p:outputLabel for="bio" value="Biographies:" />
				<p:inputText id="bio" label="bio"
					value="#{profileBean.newProfile.bio}" />
				<br />
				<p:outputLabel value="Role" />
				<br/>
				<p:selectOneMenu id="roleOption"
					value="#{profileBean.newProfile.roleResult}"
					converter="roleConverter" converterMessage="Fail to Convert"
					validatorMessage="Fail to validade">
					<f:selectItems value="#{roleBean.roles}" var="r"
						itemValue="#{r.rolename}" itemLabels="#{r.rolename}" />
				</p:selectOneMenu>


			</p:outputPanel>
			<br />
			<p:commandButton action="#{profileBean.createNewProfile}"
				value="Spara" update="profileTable"
				onsuccess="PF('newProfileDialog').hide()" />
		</p:dialog>





















		<p:separator />

		<p:dataTable id="eventTable" value="#{eventBean.events}" var="eve"
			editable="true" editMode="cell">
			<f:facet name="header">
				<h:outputText value="Events" />
			</f:facet>

			<p:column headerText="Name">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{eve.name}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{eve.name}" />
					</f:facet>

				</p:cellEditor>
			</p:column>

			<p:column headerText="Category">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{eve.catagory}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{eve.catagory}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Date">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{eve.date}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{eve.date}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Location">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{eve.location}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{eve.location}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column headerText="Raiting">
				<p:cellEditor>
					<f:facet name="output">
						<h:outputLabel value="#{eve.raiting}" />
					</f:facet>
					<f:facet name="input">
						<p:inputText value="#{eve.raiting}" />
					</f:facet>
				</p:cellEditor>
			</p:column>

			<p:column style="width:35px">
				<p:commandButton action="#{eventBean.editEvent(eve)}"
					icon="ui-icon-pencil" update="eventTable" />
			</p:column>


			<p:column style="width:35px">
				<p:commandButton action="#{eventBean.deleteEvent(eve)}"
					icon="ui-icon-trash" update="eventTable" />
			</p:column>

			<f:facet name="footer">
				<p:commandLink value="Add event" icon="ui-icon-plus"
					update="eventTable" oncomplete="PF('newEventDialog').show()" />
			</f:facet>
		</p:dataTable>


		<p:dialog dynamic="true" id="newEventDialog"
			widgetVar="newEventDialog" width="300" height="300">
			<p:outputPanel>
				<p:outputLabel for="eventName" value="Name:" />
				<p:inputText id="eventName" label="eventName"
					value="#{eventBean.newEvent.name}" />
				<p:outputLabel for="eventCatagory" value="Catagory:" />
				<p:inputText id="eventCatagory" label="Catagory"
					value="#{eventBean.newEvent.catagory}" />
				<p:outputLabel for="eventDate" value="Date:" />
				<p:inputText id="eventDate" label="Date"
					value="#{eventBean.newEvent.date}" />
				<p:outputLabel for="eventLocation" value="Location:" />
				<p:inputText id="eventLocation" label="Location"
					value="#{eventBean.newEvent.location}" />
				<p:outputLabel for="eventRaiting" value="Raiting:" />
				<p:inputText id="eventRaiting" label="Raiting"
					value="#{eventBean.newEvent.raiting}" />

			</p:outputPanel>
			<p:commandButton action="#{eventBean.createNewEvent}" value="Spara"
				update="eventTable" onsuccess="PF('newEventDialog').hide()" />
		</p:dialog>

		<p:separator />

		<p:dataTable id="tagTable" value="#{tagBean.tags}" var="tag"
			editable="true" editMode="cell">
			<f:facet name="header">
				<h:outputText value="Tags" />
			</f:facet>
			<p:column headerText="Name">
				<h:outputLabel value="#{tag.name}" />
			</p:column>

			<p:column headerText="Update" widht="25">
				<p:commandLink value="Edit tag" icon="ui-icon-plus"
					oncomplete="PF('editTagDialog').show()" />

			</p:column>

			<p:column headerText="Delete" widht="25">
				<p:commandButton action="#{tagBean.deleteTag(tag)}"
					icon="ui-icon-trash" update="tagTable" />
			</p:column>

			<f:facet name="footer">
				<p:commandLink value="Add tag" icon="ui-icon-plus"
					oncomplete="PF('newTagDialog').show()" />
			</f:facet>
		</p:dataTable>

		<p:dialog dynamic="true" id="newTagDialog" widgetVar="newTagDialog"
			width="300" height="300">
			<p:outputPanel>
				<p:outputLabel for="tagName" value="Name:" />
				<p:inputText id="tagName" label="TagName"
					value="#{tagBean.newTag.name}" />

			</p:outputPanel>
			<p:commandButton action="#{tagBean.createNewTag}" value="Spara"
				update="tagTable" onsuccess="PF('newTagDialog').hide()" />
		</p:dialog>

		<p:dialog dynamic="true" id="editTagDialog" widgetVar="newTagDialog"
			width="300" height="300">
			<p:outputPanel>
				<p:outputLabel for="tagEditName" value="tagBean.findById(tag)}" />
				<p:inputText id="tagEditName" label="TagName"
					value="#{tagBean.newTag.name}" />

			</p:outputPanel>
			<p:commandButton action="#{tagBean.createNewTag}" value="Spara"
				update="tagTable" onsuccess="PF('newTagDialog').hide()" />
		</p:dialog>

	</h:form>
</h:body>
</html>
